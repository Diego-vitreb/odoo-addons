<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <template id="sd_contract_for_employee_report_document">
			<t t-call="report.external_layout">
				<t t-if="o and 'company_id' in o">
        			<t t-set="company" t-value="o.company_id"/>
    			</t>
			    <t t-if="not o or not 'company_id' in o">
			        <t t-set="company" t-value="res_company"/>
			    </t>
				<div class="page" style="font-size:11px">
					<h3 class="text-center">Ficha de tratamiento</h3>
					<div class="row mt8">
						<div class="col-xs-4" style="border:1px solid black">Fecha contrato: <b><span t-if="o.date_start" t-field="o.date_start"/></b></div>
						<div class="col-xs-3" style="border:1px solid black;margin-left:10px">Nº Contrato: <b><span t-if="o.code" t-field="o.code"/></b></div>
						<div class="col-xs-4 col-xs-offset-1" style="border:1px solid black;margin-left:10px">Comerical: <b><span t-if="o.manager_id" t-field="o.manager_id.name"/></b></div>
					</div>
					<div class="row mt8">
						<div class="col-xs-12" style="border:1px solid black">Razón social: <b><span t-field="o.partner_id.name"/></b></div>
						<div class="col-xs-12 mt8" style="border:1px solid black">Nombre comercial: <b><span t-field="o.partner_id.comercial"/></b></div>
						<div class="col-xs-12 mt8" style="border:1px solid black">Dirección tratamiento: 
							<b>
								<t t-if="o.contact_id">
									<span style="font-size:12px" t-esc="'%s, ' % o.contact_id.street" />
									<span style="font-size:12px" t-esc="'CP: %s, ' % o.contact_id.zip" />
									<span style="font-size:12px" t-esc="'%s, ' % o.contact_id.city" />
									<span style="font-size:12px" t-esc="'%s' % o.contact_id.country_id.name" />
								</t>
								<t t-if="not o.contact_id">
									<span style="font-size:12px" t-esc="'%s, ' % o.partner_id.street" />
									<span style="font-size:12px" t-esc="'CP: %s, ' % o.partner_id.zip" />
									<span style="font-size:12px" t-esc="'%s, ' % o.partner_id.city" />
									<span style="font-size:12px" t-esc="'%s' % o.partner_id.country_id.name" />
								</t>
							</b>
						</div>
						<div class="col-xs-12 mt8" style="border:1px solid black">Instalaciones: 
							<b>
								<t t-if="o.contact_id">
									<span t-field="o.contact_id.name"/>
								</t>
								<t t-if="not o.contact_id">
									<span t-field="o.partner_id.name"/>
								</t>
							</b>
						</div>
						<div class="col-xs-12 mt8" style="border:1px solid black">Servicios:
							<b>
								<span t-foreach="o.recurring_invoice_line_ids" t-as="l"><span t-field="l.name"/> </span>
							</b>
						</div>
						<div class="col-xs-12 mt8" style="border:1px solid black">Programa de visitas anuales:
							<b>
								<span t-foreach="o.recurring_invoice_line_ids" t-as="l"><span t-esc="'%d para %s, ' % (l.quantity, l.name)"/> </span>
							</b>
						</div>
						<div class="col-xs-5 mt8" style="border:1px solid black">Persona de contacto:
							<b>
								<t t-if="o.contact_id">
									<span t-field="o.contact_id.function"/>
								</t>
								<t t-if="not o.contact_id">
									<span t-if="o.partner_id.function" t-field="o.partner_id.function"/>
								</t>
							</b>
						</div>
						<div class="col-xs-5 mt8" style="border:1px solid black;margin-left:10px">Telf:
							<b>
								<t t-if="o.contact_id">
									<span t-field="o.contact_id.phone"/><t t-if="o.contact_id.mobile"> - <span t-field="o.contact_id.mobile"/></t>
								</t>
								<t t-if="not o.contact_id">
									<span t-field="o.partner_id.phone"/><t t-if="o.partner_id.mobile"> - <span t-field="o.partner_id.mobile"/></t>
								</t>
							</b>
						</div>
						<div class="col-xs-12 mt16">Observaciones:
							<br/>
							<div class="mt8" style="width:100%;height:150px;border:1px dashed black"/>
						</div>
					</div>
    			</div>
    		</t>
    	</template>
        <template id="sd_contract_for_employee_report">
			<t t-call="report.html_container">
				<t t-foreach="doc_ids" t-as="doc_id">
					<t
						t-raw="translate_doc(doc_id, doc_model, 'partner_id.lang', 'sd_mpestano_module.sd_contract_for_employee_report_document')" />
				</t>
			</t>
		</template>
    	<report
            id="sd_contract_for_employee"
            model="account.analytic.account"        
            string="Print Contract for Employee"
            report_type="qweb-pdf"
            name="sd_mpestano_module.sd_contract_for_employee_report"
            attachment_use="False"
            file="sd_mpestano_module.sd_contract_for_employee_report"
    	/>
    </data>
</openerp>