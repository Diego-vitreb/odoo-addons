<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
    	
    	<record id="view_sd_ftp_import_form" model="ir.ui.view">
			<field name="name">view.ftp_import.form</field>
			<field name="model">sd.ftp_import</field>
			<field name="arch" type="xml">
				<form string="FTP Import">
					<header>
						<button name="import_purchase" type="object" attrs="{'invisible': [('state', 'in', ['1','2','3'])]}" string="Import" class="oe_highlight"  groups="base.group_user"/>
						<button name="create_product" type="object" attrs="{'invisible': [('state', 'in', ['0','1','2'])]}" string="Create products" class="oe_highlight"  groups="base.group_user"/>
						<button name="sincronize_purchase" type="object" attrs="{'invisible': [('state', 'in', ['0','2'])]}" string="Sincronize" class="oe_highlight"  groups="base.group_user"/>
						<field name="state" widget="statusbar"/>
					</header>
					<sheet>
						<div class="oe_title">
                        	<h1>
                        		<label string="Number import:"/>
								<field name="id" class="oe_inline"/>
							</h1>
						</div>
						<group>
							<group>
								<field name="name" attrs="{'readonly': [('state', 'in', ['1','2','3'])]}"/>
								<field name="office" attrs="{'readonly': [('state', 'in', ['1','2','3'])]}"/>
			                    <field name="date" attrs="{'readonly': [('state', 'in', ['1','2','3'])]}"/>
			                    <field name="type" string="Document" widget="selection" attrs="{'readonly': [('state', 'in', ['1','2','3'])]}"/>
			                </group>
			                <group class="oe_inline">
			                	<field name="ftp_config_id" groups="base.group_system" attrs="{'readonly': [('state', 'in', ['1','2','3'])]}"/>
			                	<field name="supplier_id"/>
			                	<field name="write_uid" string="User" readonly="True"/>
			                    <field name="write_date" readonly="True"/>
			                    <field name="auto_create" attrs="{'readonly': [('state', 'in', ['1','2','3'])]}"/>
			                </group>
		                </group>
		                <group>
		                	<group>
		                		<field name="purchase_id"/>
		                	</group>
		                </group>
		                <notebook>
	                        <page string="Imported">
	                            <field name="ftp_import_lines_id" attrs="{'readonly': [('state', '=', '2')]}">
	                                <tree string="Imported lines">
	                                    <field name="name"/>
	                                    <field name="description"/>
	                                    <field name="units"/>
	                                    <field name="price"/>
	                                    <field name="tax"/>
	                                    <field name="dto1"/>
	                                    <field name="dto2"/>
	                                    <field name="ean"/>
	                                </tree>
	                            </field>
	                        </page>
	                        <page string="Description">
	                        	<group>
		                        	<group>
			                        	<field name="head_document"/>
			                            <field name="head_date"/>
		                            </group>
		                            <group string="Header Discounts">
		                            	<field name="dto1"/>
		                            	<field name="dto2"/>
		                            	<field name="dto3"/>
		                            </group>
	                            </group>
	                        </page>
	                    </notebook>
	                 </sheet>
	                 <div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
                </form>
			</field>
		</record>
    	
    	<record id="view_sd_ftp_import_tree" model="ir.ui.view">
			<field name="name">view.ftp_import.tree</field>
			<field name="model">sd.ftp_import</field>
			<field name="arch" type="xml">
				<tree string="Ftp Import">
					<field name="id"/>
					<field name="supplier_id"/>
					<field name="head_document"/>
                    <field name="head_date"/>
                    <field name="write_date"/>
                    <field name="state"/>
                </tree>
			</field>
		</record>
    
    	<record id="sd_import_ftp" model="ir.actions.act_window">
            <field name="name">FTP Import</field>
            <field name="view_type">form</field>
            <field name="res_model">sd.ftp_import</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_sd_ftp_import_tree"/>
        </record>
        
    	<menuitem action="sd_import_ftp" id="sd_ftp_import_menu" name="FTP Import" parent="purchase.menu_procurement_management" sequence="1"/>
   
    </data>
</openerp>