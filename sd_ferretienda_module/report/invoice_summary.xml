<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<template id="sd_invoice_summary_document">
			<t t-if="o and 'company_id' in o">
       			<t t-set="company" t-value="o.company_id"/>
   			</t>
   			<t t-if="not o or not 'company_id' in o">
      				<t t-set="company" t-value="res_company"/>
   			</t>
			<t t-name="report.external_layout_header">
				<div class="header">
					<div class="row">
						<div class="col-xs-4">
							<img src="/sd_ferretienda_module/static/src/img/logo.png"
								style="max-height: 90px;" />
						</div>
						<div class="col-xs-4 mt32">
							<div class="text-center" style="font-size:16px">
								<strong>
									<span t-if="o.type == 'out_invoice' and (o.state == 'open' or o.state == 'paid')">Factura</span>
									<span t-if="o.type == 'out_invoice' and o.state == 'proforma2'">PRO-FORMA</span>
									<span t-if="o.type == 'out_invoice' and o.state == 'draft'">Factura borrador</span>
									<span t-if="o.type == 'out_invoice' and o.state == 'cancel'">Factura cancelada</span>
									<span t-if="o.type == 'out_refund'">Refund</span>
									<span t-if="o.type == 'in_refund'">Supplier Refund</span>
									<span t-if="o.type == 'in_invoice'">Supplier Invoice</span>
									<span t-field="o.number"/>
								</strong>
							</div>
						</div>
						<div class="col-xs-4">
							<br/>
							<div style="font-size:13px; font-family:entypoRegular;">Ferretienda Canarias S.L.</div>
							<div style="font-size:12px">
								<span t-esc="'%s ' % company.partner_id.street"/>
							</div>
							<div style="font-size:12px">
								<span t-field="company.partner_id.phone" /> /
								<span t-field="company.partner_id.email" />
							</div>
							<div style="font-size:12px">Santa Cruz de Tenerife</div>
						</div>
					</div>
				</div>
			</t>
			<t t-call="report.external_layout">
				<div class="page">
					<div class="row">
						<div style="font-size:12px">
							<div class="col-xs-6 mb16">
								<strong>
									<div t-if="o.date_invoice">
										Fecha de factura:
										<span t-field="o.date_invoice" />
									</div>
									<div t-if="o.partner_id.ref">
										Código de cliente:
										<span t-field="o.partner_id.ref" />
									</div>
									<div t-if="o.reference">
										Referencia:
										<span t-field="o.reference"/>
									</div>
									<div t-if="o.name">
										Descripción: Factura resumida
									</div>
								</strong>
							</div>
							<div class="col-xs-6 mb16">
								<div class="pull-right">
									<div>
										<strong>
											Datos del cliente
										</strong>
									</div>
									<div t-if="o.partner_id.name">
										<strong>Nombre fiscal: </strong>
										<t t-if="o.partner_id.parent_id">
											<span t-field="o.partner_id.parent_id.name" />
										</t>
										<t t-if="not o.partner_id.parent_id">
											<span t-field="o.partner_id.name" />
										</t>
									</div>
									<div t-if="o.partner_id.vat">
										<strong>NIF: </strong>
										<span t-field="o.partner_id.vat"/>
									</div>
									<div t-if="o.partner_id.parent_id.comercial">
										<strong>Nombre comercial: </strong>
										<span t-field="o.partner_id.parent_id.comercial" />
									</div>
									<div t-if="o.partner_id.parent_id">
										<strong>Sucursal/Contacto: </strong>
										<span t-field="o.partner_id.name"/>
									</div>
									<div t-if="o.partner_id.street or o.partner_id.zip or o.partner_id.city or o.partner_id.country_id">
										<strong>Dirección: </strong>
										<t t-if="o.partner_id.street">
											<span t-field="o.partner_id.street"/>
											<span t-if="o.partner_id.zip">,</span>
											<span t-if="not o.partner_id.zip and o.partner_id.city">,</span>
											<span t-if="not o.partner_id.zip and not o.partner_id.city and o.partner_id.country_id">,</span>
										</t>
										<t t-if="o.partner_id.zip">
											CP: <span t-field="o.partner_id.zip"/>
											<span t-if="o.partner_id.city">,</span>
											<span t-if="not o.partner_id.city and o.partner_id.country_id">,</span>
										</t>
										<t t-if="o.partner_id.city">
											<span t-field="o.partner_id.city"/>
											<span t-if="o.partner_id.country_id">,</span>
										</t>
										<t t-if="o.partner_id.country_id">
											<span t-field="o.partner_id.country_id.name"/>
										</t>
									</div>
									<div t-if="o.partner_id.phone">
										<strong>Tfno: </strong>
										<span t-esc="o.partner_id.phone"/>
									</div>
								</div>
							</div>
						</div>
					</div>
					<table class="table table-condensed" style="font-size:12px">
						<thead>
							<tr>
								<th>Nº de albarán</th>
								<th>Fecha</th>
								<th class="text-right">Total</th>
							</tr>
						</thead>
						<tbody class="invoice_tbody">
							<tr t-foreach="o.sale_order_ids" t-as="l">
								<td>
									<span t-field="l.name" />
								</td>
								<td>
									<span t-field="l.date_order" />
								</td>
								<td class="text-right">
									<span t-field="l.amount_total"
										t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}' />
								</td>
							</tr>
						</tbody>
					</table>

					<div class="row">
						<div class="col-xs-4 pull-right" style="font-size:12px">
							<table class="table table-condensed">
								<tr class="border-black">
									<td>
										<strong>Total</strong>
									</td>
									<td class="text-right">
										<span t-field="o.amount_total"
											t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}' />
									</td>
								</tr>
							</table>
						</div>
					</div>

					<div class="row" t-if="o.tax_line">
						<div class="col-xs-6" style="font-size:12px">
							<table class="table table-condensed">
								<thead>
									<tr>
										<th>Impuesto</th>
										<th class="text-right">Base</th>
										<th class="text-right">Importe</th>
									</tr>
								</thead>
								<tbody>
									<tr t-foreach="o.tax_line" t-as="t">
										<td>
											<span t-field="t.name" />
										</td>
										<td class="text-right">
											<span t-field="t.base"
												t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}' />
										</td>
										<td class="text-right">
											<span t-field="t.amount"
												t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}' />
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>

					<p t-if="o.comment" style="font-size:12px">
						<strong>Nota:</strong>
						<span t-field="o.comment" />
					</p>
					<p t-if="o.payment_term.note" style="font-size:12px">
						<strong>Términos de pago:</strong>
						<span t-field="o.payment_term.note" />
					</p>
					<p t-if="o.fiscal_position.note" style="font-size:12px">
						<strong>Posición fiscal:</strong>
						<span t-field="o.fiscal_position.note" />
					</p>
				</div>
			</t>
		</template>

		<template id="sd_invoice_summary">
			<t t-call="report.html_container">
				<t t-foreach="doc_ids" t-as="doc_id">
					<t
						t-raw="translate_doc(doc_id, doc_model, 'partner_id.lang', 'sd_ferretienda_module.sd_invoice_summary_document')" />
				</t>
			</t>
		</template>
		<report id="invoice_summary" model="account.invoice"
			name="sd_ferretienda_module.sd_invoice_summary" string="Factura resumida"
			file="sd_ferretienda_module.sd_invoice_summary" report_type="qweb-pdf"
			attachment_use="True" />
	</data>
</openerp>