<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<template id="sale.report_saleorder_document">
			<t t-if="o and 'company_id' in o">
       			<t t-set="company" t-value="o.company_id"/>
   			</t>
   			<t t-if="not o or not 'company_id' in o">
      				<t t-set="company" t-value="res_company"/>
   			</t>
			<t t-name="report.external_layout_header">
				<div class="header">
					<div class="row">
						<div class="col-xs-4">
							<img src="/sd_ferretienda_module/static/src/img/logo.png"
								style="max-height: 90px;" />
						</div>
						<div class="col-xs-4 mt32">
							<div class="text-center" style="font-size:16px">
								<strong>
									<span t-if="o.state not in ['draft','sent']">Albarán N° </span>
					              		<span t-if="o.state in ['draft','sent']">Presupuesto N° </span>
					              		<span t-field="o.name"/>
					              		<br><p/></br>
								</strong>
							</div>
						</div>
						<div class="col-xs-4">
							<br/>
							<div style="font-size:13px; font-family:entypoRegular;">Ferretienda Canarias S.L.</div>
							<div style="font-size:12px">
								<span t-esc="'%s ' % company.partner_id.street"/>
							</div>
							<div style="font-size:12px">
								<span t-field="company.partner_id.phone" /> /
								<span t-field="company.partner_id.email" />
							</div>
							<div style="font-size:12px">Santa Cruz de Tenerife</div>
						</div>
					</div>
				</div>
			</t>
			<t t-call="report.external_layout">
        		<div class="page">
            		<div class="oe_structure"/>
            		<t t-set="DESCUENTO" t-value="0" />
					<t t-foreach="o.order_line" t-as="l">
						<t t-if="l.discount > 0">
							<t t-set="DESCUENTO" t-value="1" />
						</t>
					</t>
            		<div class="col-xs-6 mb16" style="font-size:12px">
						<div t-if="o.partner_id.ref">
							<strong>Cliente: </strong>
							<span t-field="o.partner_id.ref" />
						</div>
						<div t-if="o.partner_id.comercial">
							<strong>Nombre comercial: </strong>
							<span t-field="o.partner_id.comercial" />
						</div>
						<div t-if="o.partner_id.vat">
							<strong>NIF: </strong>
							<span t-field="o.partner_id.vat" />
						</div>
						<div t-if="o.partner_id.name">
							<strong>Nombre fiscal: </strong>
							<span t-field="o.partner_id.name" />
						</div>
						<div t-if="o.partner_id.street or o.partner_id.zip or o.partner_id.city or o.partner_id.country_id">
							<strong>Dirección: </strong>
							<t t-if="o.partner_id.street">
								<span t-field="o.partner_id.street"/>
								<span t-if="o.partner_id.zip">,</span>
								<span t-if="not o.partner_id.zip and o.partner_id.city">,</span>
								<span t-if="not o.partner_id.city and not o.partner_id.city and o.partner_id.country_id">,</span>
							</t>
							<t t-if="o.partner_id.zip">
								CP: <span t-field="o.partner_id.zip"/>
								<span t-if="o.partner_id.city">,</span>
								<span t-if="not o.partner_id.city and o.partner_id.country_id">,</span>
							</t>
							<t t-if="o.partner_id.city">
								<span t-field="o.partner_id.city"/>
								<span t-if="o.partner_id.country_id">,</span>
							</t>
							<t t-if="o.partner_id.country_id">
								<span t-field="o.partner_id.country_id.name"/>
							</t>
						</div>
						<div t-if="o.partner_id.phone">
							<strong>Tfno: </strong>
							<span t-field="o.partner_id.phone" />
						</div>
					</div>
	                <div class="col-xs-6 mb16" id="informations" style="font-size:12px;">
		                <div t-if="o.client_order_ref">
		                    <strong>Your Reference:</strong>
		                    <span t-field="o.client_order_ref"/>
		                </div>
		                <div t-if="o.date_order">
			            	<strong t-if="o.state not in ['draft','sent']">Fecha de Albarán:</strong>
			                <strong t-if="o.state in ['draft','sent']">Fecha de Presupuesto:</strong>
			                <span t-field="o.date_order"/>
			           	</div>
		                <div t-if="o.user_id.name">
		                    <strong>Salesperson:</strong>
		                    <span t-field="o.user_id.name"/>
		                </div>
		            </div>
		            <table class="table table-condensed" style='font-size:12px'>
		                <thead>
		                    <tr>
		                        <th class="col-xs-4">Description</th>
		                        <th class="col-xs-2 text-right">Quantity</th>
		                        <th class="col-xs-2 text-right">Unit Price</th>
		                        <t t-if="DESCUENTO">
		                        	<th class="col-xs-2 text-right" groups="sale.group_discount_per_so_line">Disc.(%)</th>
		                        </t>
		                        <th class="col-xs-2 text-right">Price</th>
		                    </tr>
		               </thead>
		               <tbody class="sale_tbody">
		                    <tr t-foreach="o.order_line" t-as="l">
		                        <td class="col-xs-4">
		                           <span t-field="l.name"/>
		                        </td>
		                        <td class="col-xs-2 text-right">
		                            <span t-field="l.product_uom_qty"/>
		                            <span groups="product.group_uom" t-field="l.product_uom"/>
		                        </td>
		                        <td class="col-xs-2 text-right">
		                            <span t-field="l.price_unit"/>
		                        </td>
		                        <t t-if="DESCUENTO">
			                        <td class="col-xs-2 text-right" groups="sale.group_discount_per_so_line">
			                            <span t-field="l.discount"/>
			                        </td>
			                    </t>
		                        <td class="col-xs-2 text-right">
		                            <span t-field="l.price_subtotal"
		                                t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}'/>
		                        </td>
		                    </tr>
		                </tbody>
		            </table>
		            <div class="row">
                		<div class="col-xs-4 pull-right">
                			<table class="table table-condensed" style="font-size:12px">
				                <tr class="border-black">
					                <td><strong>Total</strong></td>
					                <td class="text-right">
					                	<span t-field="o.amount_total" t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}'/>
					                </td>
				                </tr>
			                 </table>
                		</div>
                	</div>
                	<p t-field="o.note" style="font-size:12px;"/>
		            <p t-if="o.payment_term.note" style="font-size:12px;">
		                <strong>Payment Term:</strong>
		                <span t-field="o.payment_term.note"/>
		            </p>
		            <div class="oe_structure"/>
		    	</div>
            </t>
		</template>
		<!-- <template id="sd_inherit_report_saleorder" inherit_id="sale.report_saleorder_document">
			<xpath expr="//div/div[@class='row']" position="replace" />
	
			<xpath expr="//div/h2" position="before">
				<div class="row mt8" />
			</xpath>

			<xpath expr="//div/h2" position="after">
				<div style="font-size:12px">
					<span t-if="o.partner_id.ref">
						<strong>Cliente: </strong>
						<span t-field="o.partner_id.ref" />
						<br />
					</span>
					<span t-if="o.partner_id.comercial">
						<strong>Nombre comercial: </strong>
						<span t-field="o.partner_id.comercial" />
						<br />
					</span>
					<span t-if="o.partner_id.vat">
						<strong>NIF: </strong>
						<span t-field="o.partner_id.vat" />
						<br />
					</span>
					<span t-if="o.partner_id.name">
						<strong>Nombre fiscal: </strong>
						<span t-field="o.partner_id.name" />
						<br />
					</span>
					<span t-if="o.partner_id.street">
						<strong>Dirección: </strong>
						<span t-esc="'%s, ' % o.partner_id.street" />
						<span t-esc="'CP: %s, ' % o.partner_id.zip" />
						<span t-esc="'%s, ' % o.partner_id.city" />
						<span t-esc="'%s' % o.partner_id.country_id.name" />
						<br/>
					</span>
					<span t-if="o.partner_id.phone">
						<strong>Tfno: </strong>
						<span t-field="o.partner_id.phone" />
					</span>
				</div>
			</xpath>
			
			<xpath expr="//div/h2" position="replace">
				<div class="text-center" style="font-size:16px">
					<strong>
						<span t-if="o.state not in ['draft','sent']">Albarán N° </span>
                		<span t-if="o.state in ['draft','sent']">Presupuesto N° </span>
                		<span t-field="o.name"/>
                		<br><p/></br>
					</strong>
				</div>
			</xpath>
			
			<xpath expr="//div[@t-if='o.date_order']" position="replace">
				<div t-if="o.date_order" class="col-xs-3">
	            	<strong t-if="o.state not in ['draft','sent']">Fecha de Albarán:</strong>
	                <strong t-if="o.state in ['draft','sent']">Fecha de Presupuesto:</strong>
	                <p t-field="o.date_order"/>
	           	</div>
			</xpath>
			
			<xpath expr="//div/div[@class='row mt32 mb32']" position="attributes">
				<attribute name="style">font-size:12px</attribute>
			</xpath>

			<xpath expr="//div/table[@class='table table-condensed']" position="replace">
				<table class="table table-condensed" style='font-size:12px'>
	                <thead>
	                    <tr>
	                        <th class="col-xs-4">Description</th>
	                        <th class="col-xs-2 text-right">Quantity</th>
	                        <th class="col-xs-2 text-right">Unit Price</th>
	                        <th class="col-xs-2 text-right" groups="sale.group_discount_per_so_line">Disc.(%)</th>
	                        <th class="col-xs-2 text-right">Price</th>
	                    </tr>
	               </thead>
	               <tbody class="sale_tbody">
	                    <tr t-foreach="o.order_line" t-as="l">
	                        <td class="col-xs-4">
	                           <span t-field="l.name"/>
	                        </td>
	                        <td class="col-xs-2 text-right">
	                            <span t-field="l.product_uom_qty"/>
	                            <span groups="product.group_uom" t-field="l.product_uom"/>
	                        </td>
	                        <td class="col-xs-2 text-right">
	                            <span t-field="l.price_unit"/>
	                        </td>
	                        <td class="col-xs-2 text-right" groups="sale.group_discount_per_so_line">
	                            <span t-field="l.discount"/>
	                        </td>
	                        <td class="col-xs-2 text-right">
	                            <span t-field="l.price_subtotal"
	                                t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}'/>
	                        </td>
	                    </tr>
	                </tbody>
	            </table>
			</xpath>

			<xpath expr="//div/div/table[@class='table table-condensed']" position="replace">
				<table class="table table-condensed" style="font-size:12px">
	                <tr class="border-black">
		                <td><strong>Total</strong></td>
		                <td class="text-right">
		                	<span t-field="o.amount_total" t-field-options='{"widget": "monetary", "display_currency": "o.pricelist_id.currency_id"}'/>
		                </td>
	                </tr>
                 </table>
			</xpath>

			<xpath expr="//div/p[@t-field='o.note']" position="attributes">
				<attribute name="style">font-size:12px</attribute>
			</xpath>

			<xpath expr="//div/p[@t-if='o.payment_term.note']" position="attributes">
				<attribute name="style">font-size:12px</attribute>
			</xpath>
			
			<xpath expr="//div/div/div[@t-if='o.payment_term']" position="replace" />

		</template> -->
	</data>
</openerp>