<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<template id="sd_inherit_report_invoice" inherit_id="account.report_invoice_document">

			<xpath expr="//div/div/div[@class='col-xs-5 col-xs-offset-7']" position="replace">
                <div class="row mt16"/>
				<div class="col-xs-4 col-xs-offset-4" style="font-size:16px">
					<strong>
						<span t-if="o.type == 'out_invoice' and (o.state == 'open' or o.state == 'paid')">Invoice</span>
						<span t-if="o.type == 'out_invoice' and o.state == 'proforma2'">PRO-FORMA</span>
						<span t-if="o.type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
						<span t-if="o.type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
						<span t-if="o.type == 'out_refund'">Refund</span>
						<span t-if="o.type == 'in_refund'">Supplier Refund</span>
						<span t-if="o.type == 'in_invoice'">Supplier Invoice</span>
						<span t-field="o.number"/>
					</strong>
				</div>
				<div style="font-size:12px">
					<div class="col-xs-8">
						<strong>
							<span t-if="o.date_invoice">
								<br>
									Fecha de factura:
									<span t-field="o.date_invoice"/>
								</br>
							</span>
							<span t-if="o.origin">
								<br>
									Origen:
									<span t-field="o.origin"/>
								</br>
							</span>
							<span t-if="o.partner_id.ref">
								<br>
									Código de cliente:
									<span t-field="o.partner_id.ref"/>
								</br>
							</span>
							<span t-if="o.reference">
								<br>
									Referencia:
									<span t-field="o.reference"/>
								</br>
							</span>
							<span t-if="o.name">
								<br>
									Descripción:
									<span t-field="o.name"/>
								</br>
							</span>
							<br>
								<p/>
							</br>
							<br/>
						</strong>
					</div>
					<div class="col-xs-pull-11">
						<strong>
							Datos de cliente
							<br/>
						</strong>
						<span t-if="o.partner_id.comercial">
							<strong>Nombre comercial: </strong>
							<span t-field="o.partner_id.comercial"/>
							<br/>
						</span>
						<span t-if="o.partner_id.name">
							<strong>Nombre fiscal: </strong>
							<span t-field="o.partner_id.name"/>
							<br/>
						</span>
						<span t-if="o.partner_id.vat">
							<strong>NIF: </strong>
							<span t-field="o.partner_id.vat"/>
							<br/>
						</span>
						<span t-if="o.partner_id.street">
							<strong>Dirección: </strong>
							<span t-if="o.partner_id.street"><span t-esc="'%s, ' % o.partner_id.street"/></span>
							<span t-if="o.partner_id.zip"><span t-esc="'CP: %s, ' % o.partner_id.zip"/></span>
							<span t-if="o.partner_id.city"><span t-esc="'%s, ' % o.partner_id.city"/></span>
							<span t-if="o.partner_id.country_id.name"><span t-esc="'%s' % o.partner_id.country_id.name"/></span>
							<br/>
						</span>
						<span t-if="o.partner_id.phone">
							<strong>Tfno: </strong>
							<span t-esc="o.partner_id.phone"/>
						</span>
					</div>
				</div>
			</xpath>
			
			<xpath expr="//div[@class='page']/table[@class='table table-condensed']" position="replace">
				<table class="table table-condensed">
	                <thead>
	                    <tr>
	                        <th class="col-xs-4">Description</th>
	                        <th class="col-xs-1">Quantity</th>
	                        <th class="text-right col-xs-2">Unit Price</th>
	                        <th class="text-right col-xs-2" groups="sale.group_discount_per_so_line">Discount (%)</th>
	                        <th class="text-right col-xs-1">Taxes</th>
	                        <th class="text-right col-xs-2">Amount</th>
	                    </tr>
	                </thead>
                	<tbody class="invoice_tbody">
                    	<tr t-foreach="o.invoice_line" t-as="l">
	                        <td class="col-xs-4"><span t-field="l.name"/></td>
	                        <td class="col-xs-1">
	                            <span t-field="l.quantity"/>
	                            <span t-field="l.uos_id"  groups="product.group_uom"/>
	                        </td>
	                        <td class="text-right col-xs-2">
	                            <span t-field="l.price_unit"/>
	                        </td>
	                        <td class="text-right col-xs-2" groups="sale.group_discount_per_so_line"><span t-field="l.discount"/></td>
	                        <td class="text-right col-xs-1">
	                            <span t-esc="', '.join(map(lambda x: x.name, l.invoice_line_tax_id))"/>
	                        </td>
	                        <td class="text-right col-xs-2">
	                            <span t-field="l.price_subtotal" 
	                                t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
	                        </td>
	                    </tr>
	                </tbody>
	            </table>
			
			</xpath>

			<xpath expr="//div/div[@class='row mt32 mb32']" position="replace"/>

			<xpath expr="//div/h2" position="replace"/>

			<xpath expr="//div/table[@class='table table-condensed']" position="attributes">
				<attribute name="style">font-size:12px</attribute>
			</xpath>

			<xpath expr="//div/div[@class='col-xs-4 pull-right']" position="attributes">
				<attribute name="style">font-size:12px</attribute>
			</xpath>

			<xpath expr="//div/div[@class='col-xs-6']" position="attributes">
				<attribute name="style">font-size:12px</attribute>
			</xpath>

			<xpath expr="//div/p[@t-if='o.comment']" position="attributes">
				<attribute name="style">font-size:12px</attribute>
			</xpath>

			<xpath expr="//div/p[@t-if='o.payment_term.note']" position="attributes">
				<attribute name="style">font-size:12px</attribute>
			</xpath>

			<xpath expr="//div/p[@t-if='o.fiscal_position.note']" position="attributes">
				<attribute name="style">font-size:12px</attribute>
			</xpath>

		</template>
	</data>
</openerp>